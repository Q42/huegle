<!DOCTYPE html>
<meta charset="UTF-8">
<title>hue preparator</title>
<style>
button {
	width: 100%;
	height: 45px;
	margin-bottom: 5px;
}
#output {
	background-color: #eee;
	padding: 10px;
	margin-top: 40px;
	clear: both;
}
</style>

<div>
	This is just an admin screen for preparation and debugging. Scroll to the bottom to see the output of an action.
</div>

<button id="allOn">All on</button>
<button id="allOff">All off</button>

<button id="brightnessLow">Low brightness</button>
<button id="brightnessFull">Full brightness</button>

<button id="colorloop">Colorloop</button>
<button id="stopEffect">Stop Effect</button>

<button id="createUser">Create User</button>
<button id="createGroupRed">Create Red Group</button>
<button id="createGroupGreen">Create Green Group</button>
<button id="createGroupYellow">Create Yellow Group</button>
<button id="createGroupBlue">Create Blue Group</button>
<button id="getGroups">Get Groups</button>
<button id="deleteGroup1">Delete Group 1</button>
<button id="deleteGroup2">Delete Group 2</button>
<button id="deleteGroup3">Delete Group 3</button>
<button id="deleteGroup4">Delete Group 4</button>

<button id="getConfig">Get Config</button>
<button id="getFullConfig">Get Full Config</button>

<pre id="output">Output</pre>

<script src="jquery.min.js"></script>
<script>
var bridgeip = '192.168.1.101';
var username = 'aValidUser';

var redGroup = [ '2', '3', '4', '5', '6', '8', '9', '10', '11', '12', '13', '14', '16' ];
var greenGroup = [ '15', '22', '23', '29', '30', '36', '37', '38', '39', '44', '45' ];
var yellowGroup = [ '20', '21', '27', '28', '34', '35', '40', '41', '42', '46', '47', '48' ];
var blueGroup = [ '17', '18', '19', '24', '25', '26', '31', '32', '33' ];

bindButton('#allOn', 'PUT', username + '/groups/0/action', { on: true });
bindButton('#allOff', 'PUT', username + '/groups/0/action', { on: false });
bindButton('#brightnessLow', 'PUT', username + '/groups/0/action', { bri: 10 });
bindButton('#brightnessFull', 'PUT', username + '/groups/0/action', { bri: 255 });
bindButton('#colorloop', 'PUT', username + '/groups/0/action', { effect: 'colorloop' });
bindButton('#stopEffect', 'PUT', username + '/groups/0/action', { effect: 'none' });
bindButton('#createUser', 'POST', '', { devicetype: 'GoogleHue', username: 'aValidUser' });
bindButton('#createGroupRed', 'POST', username + '/groups', { name: 'red', lights: redGroup });
bindButton('#createGroupGreen', 'POST', username + '/groups', { name: 'green', lights: greenGroup });
bindButton('#createGroupYellow', 'POST', username + '/groups', { name: 'yellow', lights: yellowGroup });
bindButton('#createGroupBlue', 'POST', username + '/groups', { name: 'blue', lights: blueGroup });
bindButton('#getGroups', 'GET', username + '/groups');
bindButton('#deleteGroup1', 'DELETE', username + '/groups/1');
bindButton('#deleteGroup2', 'DELETE', username + '/groups/2');
bindButton('#deleteGroup3', 'DELETE', username + '/groups/3');
bindButton('#deleteGroup4', 'DELETE', username + '/groups/4');
bindButton('#getConfig', 'GET', username + '/config');
bindButton('#getFullConfig', 'GET', username);


function bindButton(selector, type, resource, body) {
	$(selector).on('click', function() {
		send(type, resource, body);
	});
}

function send(type, resource, body) {
	$.ajax({
		url: 'http://' + bridgeip + '/api/' + resource,
		type: type,        
		data: JSON.stringify(body),
		success: function(data, textStatus, jqXHR) {
			$('#output').text(JSON.stringify(data, null, 4));
		},
		error: function(jqXHR, textStatus, errorThrown) {
			$('#output').text(textStatus + errorThrown);
			console.log(textStatus);
			console.log(errorThrown);
		}
	});
}
</script>